<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Handling Slocum Glider Data • oceglider</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Handling Slocum Glider Data">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">oceglider</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.15</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/oceglider.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/sea_explorer.html">Handling SeaExplorer Glider Data</a></li>
    <li><a class="dropdown-item" href="../articles/slocum_glider.html">Handling Slocum Glider Data</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/dankelley/oceglider/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Handling Slocum Glider Data</h1>
                        <h4 data-toc-skip class="author">Dan Kelley (<a href="https://orcid.org/0000-0001-7808-5911" class="external-link uri">https://orcid.org/0000-0001-7808-5911</a>)</h4>
            
            <h4 data-toc-skip class="date">2025-02-15</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/dankelley/oceglider/blob/HEAD/vignettes/slocum_glider.Rmd" class="external-link"><code>vignettes/slocum_glider.Rmd</code></a></small>
      <div class="d-none name"><code>slocum_glider.Rmd</code></div>
    </div>

    
    
<p><strong>Abstract.</strong> This vignette explains the basics of using
the oceglider package on Slocum data. The main difference from
SeaExplorer files is in the layout of the objects, with SeaExplorer
basically considering glider and payload in separate streams. But normal
use, with plotting, subsetting, etc., does not require the user to
consider the details of the layout.</p>
<p>For this vignette to be suitable for CRAN submission, it must not
download files to the user’s working space. We avoid that by setting
aside space in the next line.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fileNC</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span>fileext <span class="op">=</span> <span class="st">".nc"</span><span class="op">)</span> <span class="co"># to hold a binary (NetCDF) file</span></span></code></pre></div>
<p>Note that this <code>fileNC</code> file will be deleted at the end of
this vignette. Obviously, in actual practice, the analyst is likely to
store the downloaded file in a more permanent location, and not to
delete it when finished a particular task.</p>
<div class="section level2">
<h2 id="some-common-steps-with-slocum-datasets">Some Common Steps with Slocum Datasets<a class="anchor" aria-label="anchor" href="#some-common-steps-with-slocum-datasets"></a>
</h2>
<p>We will use a dataset from CPROOF (Reference 1).</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dankelley.github.io/oceglider/">oceglider</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; Loading required package: ncdf4</span></span>
<span><span class="co">#&gt; Loading required package: oce</span></span>
<span><span class="co">#&gt; Loading required package: gsw</span></span>
<span><span class="va">url</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span></span>
<span>    <span class="st">"https://cproof.uvic.ca/gliderdata/deployments/"</span>,</span>
<span>    <span class="st">"dfo-bumblebee998/dfo-bumblebee998-20221207/"</span>,</span>
<span>    <span class="st">"L0-timeseries/"</span>,</span>
<span>    <span class="st">"dfo-bumblebee998-20221207_delayed.nc"</span></span>
<span><span class="op">)</span></span>
<span><span class="va">file</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">gsub</a></span><span class="op">(</span><span class="st">".*/"</span>, <span class="st">""</span>, <span class="va">url</span><span class="op">)</span></span>
<span><span class="co"># 45.8 MB file: download takes 0.4s user, 0.9s system but 11s elapsed</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/files.html" class="external-link">file.exists</a></span><span class="op">(</span><span class="va">file</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/system.time.html" class="external-link">system.time</a></span><span class="op">(</span><span class="fu">curl</span><span class="fu">::</span><span class="fu"><a href="https://jeroen.r-universe.dev/curl/reference/curl_download.html" class="external-link">curl_download</a></span><span class="op">(</span>url <span class="op">=</span> <span class="va">url</span>, destfile <span class="op">=</span> <span class="va">file</span>, mode <span class="op">=</span> <span class="st">"wb"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="va">g</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/read.glider.netcdf.html">read.glider.netcdf</a></span><span class="op">(</span><span class="va">file</span><span class="op">)</span> <span class="co"># under 0.2s</span></span></code></pre></div>
<p>It always makes sense to get a summary, to see what data are
contained in the object.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">g</span><span class="op">)</span></span>
<span><span class="co">#&gt; Glider Summary</span></span>
<span><span class="co">#&gt; --------------</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; * Type:       slocum</span></span>
<span><span class="co">#&gt; * Subtype:    ?</span></span>
<span><span class="co">#&gt; * Input file:</span></span>
<span><span class="co">#&gt;     dfo-bumblebee998-20221207_delayed.nc</span></span>
<span><span class="co">#&gt; * Time:       2022-12-07 16:15:54 to 2022-12-11 06:53:54 (mean increment 1.366 s)</span></span>
<span><span class="co">#&gt; * Data Overview:</span></span>
<span><span class="co">#&gt;                                        Min.       Mean      Max.   Dim.          OriginalName</span></span>
<span><span class="co">#&gt;     latitude [°N]                    48.962     49.087    49.159 228325              latitude</span></span>
<span><span class="co">#&gt;     longitude [°E]                  -127.35    -126.82    -125.9 228325             longitude</span></span>
<span><span class="co">#&gt;     heading [rad]                 0.0081383     3.5527    6.2779 228325               heading</span></span>
<span><span class="co">#&gt;     pitch [rad]                    -0.91705 -0.0039137   0.96655 228325                 pitch</span></span>
<span><span class="co">#&gt;     roll [rad]                     -0.41012 -0.0049735   0.23825 228325                  roll</span></span>
<span><span class="co">#&gt;     waypointLatitude [°N]                 0     48.033    48.852 228325     waypoint_latitude</span></span>
<span><span class="co">#&gt;     waypointLongitude [°E]           -130.2    -128.77         0 228325    waypoint_longitude</span></span>
<span><span class="co">#&gt;     conductivity [S/m]                2e-05     3.3763    3.5003 228325          conductivity</span></span>
<span><span class="co">#&gt;     temperature [°C]                 3.4766     7.1911    14.208 228325           temperature</span></span>
<span><span class="co">#&gt;     pressure [dbar]                 -0.2657     234.62    1039.6 228325              pressure</span></span>
<span><span class="co">#&gt;     chlorophyll [mg/m³]              0.0219    0.24789    12.096 228325           chlorophyll</span></span>
<span><span class="co">#&gt;     cdom [ppb]                      -3.8178    0.91799    97.899 228325                  cdom</span></span>
<span><span class="co">#&gt;     backscatter700               0.00010584 0.00033849 0.0077169 228325       backscatter_700</span></span>
<span><span class="co">#&gt;     oxygenConcentration [μmol/l]      8.644     148.74    293.94 228325  oxygen_concentration</span></span>
<span><span class="co">#&gt;     u [m/s]                        -0.51893   -0.12134   0.12245 228325                     u</span></span>
<span><span class="co">#&gt;     v [m/s]                       -0.075335   0.070058   0.31982 228325                     v</span></span>
<span><span class="co">#&gt;     depth [m]                      -0.26345     232.28    1028.2 228325                 depth</span></span>
<span><span class="co">#&gt;     distanceOverGround                    0     85.221    155.63 228325  distance_over_ground</span></span>
<span><span class="co">#&gt;     salinity                     4.3609e-06     33.197    34.369 228325              salinity</span></span>
<span><span class="co">#&gt;     potentialDensity [kg/m³]         999.61       1026    1027.4 228325     potential_density</span></span>
<span><span class="co">#&gt;     density [kg/m³]                  999.67     1026.9      1032 228325               density</span></span>
<span><span class="co">#&gt;     potentialTemperature [°C]        3.4022     7.1654     10.95 228325 potential_temperature</span></span>
<span><span class="co">#&gt;     profileIndex                          0     147.51       218 228325         profile_index</span></span>
<span><span class="co">#&gt;     profileDirection                     -1   0.014065         1 228325     profile_direction</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; * Processing Log</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     - 2025-02-15 10:51:48 UTC: `create 'glider' object`</span></span></code></pre></div>
<p>Next, make a map to see where the sampling was done.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">g</span>, which <span class="op">=</span> <span class="st">"map"</span><span class="op">)</span></span></code></pre></div>
<p><img src="slocum_glider_files/figure-html/unnamed-chunk-5-1.png" width="700"></p>
<p>This map comports with the one on Reference 2, except we have proper
scaling of the axes, because <code>oceglider</code> computes an aspect
ratio that will preserve shapes at the centre of the plot.</p>
<p>Next, examine the pressure-time trajectory.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">g</span>, which <span class="op">=</span> <span class="st">"p"</span><span class="op">)</span></span></code></pre></div>
<p><img src="slocum_glider_files/figure-html/unnamed-chunk-6-1.png" width="700"></p>
<p>Note that there is a large region of whitespace on the right of the
plot panel. This is because the dataset has time values in that
interval, but all the pressure values are NA. The <code><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset()</a></code>
function could be used to trim the dataset, but that is not necessarily
wise because there could be other valuable data (even just longitude and
latitude are valuable, in case the hydrographic sensors provide nothing
useable).</p>
<p>We can show temperature on a similar plot, by switching from lines to
points, and colour-coding by temperature.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">g</span>, which <span class="op">=</span> <span class="st">"p"</span>, type <span class="op">=</span> <span class="st">"p"</span>, pch <span class="op">=</span> <span class="fl">20</span>, cex <span class="op">=</span> <span class="fl">0.2</span>, colorby <span class="op">=</span> <span class="st">"temperature"</span><span class="op">)</span></span></code></pre></div>
<p><img src="slocum_glider_files/figure-html/unnamed-chunk-7-1.png" width="700"></p>
<p>Notice that the colour palette ranges up to red, although only a
small region of the graph has that colour. but a quick glance at the
graph does not reveal many points that are of sufficient temperature to
be indicated with that color. The methods illustrated in the SeaExplorer
vignette can be employed here, but for brevity we will just use
percentile trimming to get a diagram that at least provides an initial
view of the data.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">g</span>,</span>
<span>    which <span class="op">=</span> <span class="st">"p"</span>, type <span class="op">=</span> <span class="st">"p"</span>, pch <span class="op">=</span> <span class="fl">20</span>, cex <span class="op">=</span> <span class="fl">0.2</span>, colorby <span class="op">=</span> <span class="st">"temperature"</span>,</span>
<span>    colorbylim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/quantile.html" class="external-link">quantile</a></span><span class="op">(</span><span class="va">g</span><span class="op">[[</span><span class="st">"temperature"</span><span class="op">]</span><span class="op">]</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.01</span>, <span class="fl">0.99</span><span class="op">)</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="slocum_glider_files/figure-html/unnamed-chunk-8-1.png" width="700"></p>
<p>Readers might agree that this version looks better, displaying more
features than in the first plot.</p>
<p>Salinity is often a problem, but we’ll do the same thing, first
plotting all the data.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">g</span>, which <span class="op">=</span> <span class="st">"p"</span>, type <span class="op">=</span> <span class="st">"p"</span>, pch <span class="op">=</span> <span class="fl">20</span>, cex <span class="op">=</span> <span class="fl">0.2</span>, colorby <span class="op">=</span> <span class="st">"salinity"</span><span class="op">)</span></span></code></pre></div>
<p><img src="slocum_glider_files/figure-html/unnamed-chunk-9-1.png" width="700"></p>
<p>And, second, trimming.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">g</span>,</span>
<span>    which <span class="op">=</span> <span class="st">"p"</span>, type <span class="op">=</span> <span class="st">"p"</span>, pch <span class="op">=</span> <span class="fl">20</span>, cex <span class="op">=</span> <span class="fl">0.2</span>, colorby <span class="op">=</span> <span class="st">"salinity"</span>,</span>
<span>    colorbylim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/quantile.html" class="external-link">quantile</a></span><span class="op">(</span><span class="va">g</span><span class="op">[[</span><span class="st">"salinity"</span><span class="op">]</span><span class="op">]</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.01</span>, <span class="fl">0.99</span><span class="op">)</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="slocum_glider_files/figure-html/unnamed-chunk-10-1.png" width="700"></p>
<p>Again, we see improvement.</p>
<p>At this stage, we have some confidence that data are being read
properly and that plotting, extraction with <code>[[</code> and some
other basic features work. Readers are directed to the SeaExplorer
vignette for more ideas on things that might be worth pursuing.</p>
<p>As noted at the outset, CRAN rules dictate that the downloaded
material be deleted. In actual analysis, though, it is unlikely that
such material would be deleted, so don’t just copy this line!</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/unlink.html" class="external-link">unlink</a></span><span class="op">(</span><span class="va">fileNC</span><span class="op">)</span> <span class="co"># where the binary (NetCDF) file went</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<ol style="list-style-type: decimal">
<li>“dfo-bumblebee998-2022-12-07 Time series Delayed” Accessed September
5,
<ol start="2024" style="list-style-type: decimal">
<li><a href="https://cproof.uvic.ca/gliderdata/deployments/dfo-bumblebee998/dfo-bumblebee998-20221207/" class="external-link uri">https://cproof.uvic.ca/gliderdata/deployments/dfo-bumblebee998/dfo-bumblebee998-20221207/</a></li>
</ol>
</li>
</ol>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Dan Kelley, Clark Richards, Chantelle Layton.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>

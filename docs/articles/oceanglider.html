<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Introduction to oceGlider • oceGlider</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Introduction to oceGlider">
<meta property="og:description" content="oceGlider">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">oceGlider</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.1.4</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/oceanglider.html">Introduction to oceGlider</a>
    </li>
    <li>
      <a href="../articles/slocum_glider.html">Slocum Gliders</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Introduction to oceGlider</h1>
                        <h4 data-toc-skip class="author">Dan Kelley (<a href="https://orcid.org/0000-0001-7808-5911" class="external-link uri">https://orcid.org/0000-0001-7808-5911</a>)</h4>
            
            <h4 data-toc-skip class="date">2023-07-17</h4>
      
      
      <div class="hidden name"><code>oceanglider.Rmd</code></div>

    </div>

    
    
<p><strong>Abstract.</strong> This vignette explains the basics of using
the oceGlider package. It is a work in progress, because the functions
provided by this package are under active development.</p>
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>This package is intended to make it easier for analysts to work with
data acquired by ocean gliders. There is a wide variety of glider types
and of file formats, and the purpose of this vignette is to acquaint the
reader with a particular type (the seaexplorer from Alseamar) and
particular approach (using data files produced by the glider
itself).</p>
<p>Rather than simply state what might be best practices, I will present
a sort of illustrated diary, showing how I worked my way through a small
sample dataset that is provided with the package.</p>
</div>
<div class="section level2">
<h2 id="data-sources-and-file-organization">Data Sources and file organization<a class="anchor" aria-label="anchor" href="#data-sources-and-file-organization"></a>
</h2>
<p>The first step in working with glider data is often to download them
from a server. The lack of URL conventions for such servers can make
this a somewhat challenging task to discuss in general terms, and the
same can be said about the variety of file layouts and file names, both
across glider types and even within glider types.</p>
<p>Once data are downloaded, there is an additional task of deciding how
to organize the data locally. At the time of writing, the developers of
this package are leaning towards a scheme with directories named
like</p>
<pre><code>/data/glider/2019/seaexplorer/sea021/m49/raw
/data/glider/2019/seaexplorer/sea021/m49/sub</code></pre>
<p>for seaexplorer data. Here, <code>sea021</code> refers to seaexplorer
glider number owned by a particular institute, and <code>m49</code>
refers to the mission number. The first of these directories holds “raw”
data, i.e. the full datasets as downloaded a glider after recovery, and
the second holds “sub” data, i.e. subsets provided by the glider during
its transmissions while underway on a mission.</p>
<p>Examples of some of these data files are stored within this R
package, and are available using the <code>system.file</code> function,
as shown throughout this vignette. This should make it easier for
readers to learn how to use this package.</p>
</div>
<div class="section level2">
<h2 id="seaexplorer-gliders">SeaExplorer Gliders<a class="anchor" aria-label="anchor" href="#seaexplorer-gliders"></a>
</h2>
<p>This package comes with some sample data files that can be used for
practice and illustration. For example,</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">oceGlider</span><span class="op">)</span></span>
<span><span class="co">#&gt; Loading required package: oce</span></span>
<span><span class="co">#&gt; Loading required package: gsw</span></span>
<span><span class="va">directory</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata/seaexplorer/sub"</span>, package<span class="op">=</span><span class="st">"oceGlider"</span><span class="op">)</span></span></code></pre></div>
<p>finds the names of a few selected <code>"sub"</code> files (these are
files transmitted by the glider when it is underway; think of the “sub”
as an abbreviation for subset). Reading these files is done with the <a href="../help/read.glider.seaexplorer.realtime"><code>read.glider.seaexplorer.realtime</code></a>
function, e.g.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">g</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/read.glider.seaexplorer.realtime.html">read.glider.seaexplorer.realtime</a></span><span class="op">(</span><span class="va">directory</span><span class="op">)</span></span></code></pre></div>
<p>(when called interactively, this function will print a progress-bar,
unless instructed otherwise by setting the argument to .)</p>
<p>The package also comes with a few <code>"raw"</code> files, which are
larger datasets downloaded from the glider after recovery. In the
oceanographic convention, these are called delayed-mode data, so the
function to read them is called <a href="../help/read.glider.seaexplorer.delayed"><code>read.glider.seaexplorer.delayed</code></a></p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">directory2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata/seaexplorer/raw"</span>, package<span class="op">=</span><span class="st">"oceGlider"</span><span class="op">)</span></span>
<span><span class="va">g2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/read.glider.seaexplorer.delayed.html">read.glider.seaexplorer.delayed</a></span><span class="op">(</span><span class="va">directory2</span>, level<span class="op">=</span><span class="fl">1</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/message.html" class="external-link">message</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">g2</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; glider</span></span></code></pre></div>
<p>Here is how to plot a time-series of pressure from this dataset:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plotGlider.html">plotGlider</a></span><span class="op">(</span><span class="va">g2</span>, which<span class="op">=</span><span class="st">"p"</span><span class="op">)</span></span></code></pre></div>
<p><img src="oceanglider_files/figure-html/unnamed-chunk-5-1.png" width="700"></p>
<p>Here is how to see locations in space:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plotGlider.html">plotGlider</a></span><span class="op">(</span><span class="va">g2</span>, which<span class="op">=</span><span class="st">"map"</span><span class="op">)</span></span></code></pre></div>
<p><img src="oceanglider_files/figure-html/unnamed-chunk-6-1.png" width="700"></p>
<p>The points are on a line because <a href="../help/read.glider.seaexplorer.delayed"><code>read.glider.seaexplorer.delayed</code></a>
interpolates longitude and latitude between surfacings, and this small
subset of glider data was selected to have a position record at the
first and last of the sequence.</p>
<p>It is also noteworthy that some of the spots seem to have only a few
data. This can be checked with</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">g2</span><span class="op">[[</span><span class="st">"yoNumber"</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; 100 101 102 103 104 105 106 </span></span>
<span><span class="co">#&gt; 163   1 173   1 178   1 261</span></span></code></pre></div>
<p>the result of which show that some <code>yoNumber</code> values
contain too few data to be considered profiles. There are several ways
to explore this further, but for the present purpose, let’s make a new
object that contains only those yos that have more than, say, 5
points:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">g3</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span><span class="va">g2</span>, <span class="va">yolength</span> <span class="op">&gt;=</span> <span class="fl">5</span><span class="op">)</span></span></code></pre></div>
<p>As a check on that idea, note that</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">g3</span><span class="op">[[</span><span class="st">"yoNumber"</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 100 102 104 106</span></span></code></pre></div>
<p>verifies that we got the desired yos.</p>
<p>Quite often, it will be desirable to work with individual yos. With
only 3, as in this small test case, we might as well plot them (say as
temperature profiles). For that, it is helpful to split by yo number,
and then cycle though the subsets, converting to CTD objects and
plotting with functions from the package.</p>
<p>The individual yos can be examined by splitting the
<code>payload</code> portion:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">payload</span> <span class="op">&lt;-</span> <span class="va">g3</span><span class="op">[[</span><span class="st">"payload"</span><span class="op">]</span><span class="op">]</span> <span class="co"># or [["payload1"]]</span></span>
<span><span class="va">s</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/split.html" class="external-link">split</a></span><span class="op">(</span><span class="va">payload</span>, <span class="va">payload</span><span class="op">$</span><span class="va">yoNumber</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>mfrow<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span><span class="op">)</span> <span class="co"># we happen to know there are 3 significant yos</span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">ss</span> <span class="kw">in</span> <span class="va">s</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">ctd</span> <span class="op">&lt;-</span> <span class="fu">oce</span><span class="fu">::</span><span class="fu"><a href="https://dankelley.github.io/oce/reference/as.ctd.html" class="external-link">as.ctd</a></span><span class="op">(</span>salinity<span class="op">=</span><span class="va">ss</span><span class="op">[[</span><span class="st">"salinity"</span><span class="op">]</span><span class="op">]</span>,</span>
<span>        temperature<span class="op">=</span><span class="va">ss</span><span class="op">[[</span><span class="st">"temperature"</span><span class="op">]</span><span class="op">]</span>,</span>
<span>        pressure<span class="op">=</span><span class="va">ss</span><span class="op">[[</span><span class="st">"pressure"</span><span class="op">]</span><span class="op">]</span>,</span>
<span>        longitude<span class="op">=</span><span class="va">ss</span><span class="op">[[</span><span class="st">"longitude"</span><span class="op">]</span><span class="op">]</span>,</span>
<span>        latitude<span class="op">=</span><span class="va">ss</span><span class="op">[[</span><span class="st">"latitude"</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span>
<span>   <span class="fu">oce</span><span class="fu">::</span><span class="fu"><a href="https://dankelley.github.io/oce/reference/plotProfile.html" class="external-link">plotProfile</a></span><span class="op">(</span><span class="va">ctd</span>, xtype<span class="op">=</span><span class="st">"salinity+temperature"</span>, eos<span class="op">=</span><span class="st">"unesco"</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p><img src="oceanglider_files/figure-html/unnamed-chunk-10-1.png" width="700"></p>
<p>(Here, the UNESCO equation of state is used, because the newer
TEOS10/GSW version requires longitude and latitude information to be
valid, which is not the case in the present version of the package at
the end of a dataset, owing to how <a href="../help/read.glider.seaexplorer.delayed"><code>read.glider.seaexplorer.delayed</code></a>
is works.)</p>
<p>Note how there is a line connecting near-surface and deep data. To
learn more about that, let’s use an function to create a
`<code>scan'' plot, say with the last of these</code>ctd` objects just
created.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://dankelley.github.io/oce/reference/plotScan.html" class="external-link">plotScan</a></span><span class="op">(</span><span class="va">ctd</span>, type<span class="op">=</span><span class="st">"p"</span><span class="op">)</span></span></code></pre></div>
<p><img src="oceanglider_files/figure-html/unnamed-chunk-11-1.png" width="700"></p>
<p>This makes it clear that the yo contains near-surface data, then
skips to depth, and then returns to the surface. A more careful
examination with</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>mfrow<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">s</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">[[</span><span class="st">"time"</span><span class="op">]</span><span class="op">]</span>, <span class="va">s</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">[[</span><span class="st">"pressure"</span><span class="op">]</span><span class="op">]</span>, xlab<span class="op">=</span><span class="st">"Time"</span>, ylab<span class="op">=</span><span class="st">"Pressure"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">s</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">[[</span><span class="st">"time"</span><span class="op">]</span><span class="op">]</span>, <span class="va">s</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">[[</span><span class="st">"navState"</span><span class="op">]</span><span class="op">]</span>, xlab<span class="op">=</span><span class="st">"Time"</span>, ylab<span class="op">=</span><span class="st">"navState"</span><span class="op">)</span></span></code></pre></div>
<p><img src="oceanglider_files/figure-html/unnamed-chunk-12-1.png" width="700"></p>
<p>reveals that if the desire was to obtain a simple upcast, we might
consider subsetting by the value of the <code>navState</code>
variable.</p>
<p>Noting that the <code>navState</code> values are as follows: * 105
means the glider is not navigating yet; * 115 means the glider is
surfacing in preparation for communication; * 116 means the glider is at
the surface, acquiring a GPS signal, and is communicating; * 110 means
the glider is inflecting downward; * 100 means the glider has ballast
set to be descending; * 118 means the glider has ballast adjusted to
reduce density, so will be inflecting upward; * 117 means the glider has
ballast set to be ascending. it may be sensible to select for 117, if
the desire is to focus on the ascent portion of the yo. So, retracing
our steps, we have</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">g4</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span><span class="va">g3</span>, <span class="va">navState</span><span class="op">==</span><span class="fl">117</span><span class="op">)</span></span>
<span><span class="va">payload</span> <span class="op">&lt;-</span> <span class="va">g4</span><span class="op">[[</span><span class="st">"payload"</span><span class="op">]</span><span class="op">]</span> <span class="co"># or [["payload1"]]</span></span>
<span><span class="va">s</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/split.html" class="external-link">split</a></span><span class="op">(</span><span class="va">payload</span>, <span class="va">payload</span><span class="op">$</span><span class="va">yoNumber</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>mfrow<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span> <span class="co"># we happen to know there are 3 significant yos</span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">ss</span> <span class="kw">in</span> <span class="va">s</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">ctd</span> <span class="op">&lt;-</span> <span class="fu">oce</span><span class="fu">::</span><span class="fu"><a href="https://dankelley.github.io/oce/reference/as.ctd.html" class="external-link">as.ctd</a></span><span class="op">(</span>salinity<span class="op">=</span><span class="va">ss</span><span class="op">[[</span><span class="st">"salinity"</span><span class="op">]</span><span class="op">]</span>,</span>
<span>        temperature<span class="op">=</span><span class="va">ss</span><span class="op">[[</span><span class="st">"temperature"</span><span class="op">]</span><span class="op">]</span>,</span>
<span>        pressure<span class="op">=</span><span class="va">ss</span><span class="op">[[</span><span class="st">"pressure"</span><span class="op">]</span><span class="op">]</span>,</span>
<span>        longitude<span class="op">=</span><span class="va">ss</span><span class="op">[[</span><span class="st">"longitude"</span><span class="op">]</span><span class="op">]</span>,</span>
<span>        latitude<span class="op">=</span><span class="va">ss</span><span class="op">[[</span><span class="st">"latitude"</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span>
<span>    <span class="fu">oce</span><span class="fu">::</span><span class="fu"><a href="https://dankelley.github.io/oce/reference/plotProfile.html" class="external-link">plotProfile</a></span><span class="op">(</span><span class="va">ctd</span>, xtype<span class="op">=</span><span class="st">"salinity+temperature"</span>, eos<span class="op">=</span><span class="st">"unesco"</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p><img src="oceanglider_files/figure-html/unnamed-chunk-13-1.png" width="700"></p>
<p>These results are not much better! Selecting by <code>navState</code>
is clearly not sufficient. However, <code>oce</code> provides the
<code><a href="https://dankelley.github.io/oce/reference/ctdTrim.html" class="external-link">ctdTrim()</a></code> function for isolating the ascent (called
<code>"upcast"</code> in the CTD context), e.g.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>mfrow<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span> <span class="co"># we happen to know there are 3 significant yos</span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">ss</span> <span class="kw">in</span> <span class="va">s</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">ctd</span> <span class="op">&lt;-</span> <span class="fu">oce</span><span class="fu">::</span><span class="fu"><a href="https://dankelley.github.io/oce/reference/as.ctd.html" class="external-link">as.ctd</a></span><span class="op">(</span>salinity<span class="op">=</span><span class="va">ss</span><span class="op">[[</span><span class="st">"salinity"</span><span class="op">]</span><span class="op">]</span>,</span>
<span>        temperature<span class="op">=</span><span class="va">ss</span><span class="op">[[</span><span class="st">"temperature"</span><span class="op">]</span><span class="op">]</span>,</span>
<span>        pressure<span class="op">=</span><span class="va">ss</span><span class="op">[[</span><span class="st">"pressure"</span><span class="op">]</span><span class="op">]</span>,</span>
<span>        longitude<span class="op">=</span><span class="va">ss</span><span class="op">[[</span><span class="st">"longitude"</span><span class="op">]</span><span class="op">]</span>,</span>
<span>        latitude<span class="op">=</span><span class="va">ss</span><span class="op">[[</span><span class="st">"latitude"</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span>
<span>   <span class="va">ctd</span> <span class="op">&lt;-</span> <span class="fu">oce</span><span class="fu">::</span><span class="fu"><a href="https://dankelley.github.io/oce/reference/ctdTrim.html" class="external-link">ctdTrim</a></span><span class="op">(</span><span class="va">ctd</span>, <span class="st">"upcast"</span><span class="op">)</span></span>
<span>   <span class="fu">oce</span><span class="fu">::</span><span class="fu"><a href="https://dankelley.github.io/oce/reference/plotProfile.html" class="external-link">plotProfile</a></span><span class="op">(</span><span class="va">ctd</span>, xtype<span class="op">=</span><span class="st">"salinity+temperature"</span>, eos<span class="op">=</span><span class="st">"unesco"</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p><img src="oceanglider_files/figure-html/unnamed-chunk-14-1.png" width="700"></p>
<p>This looks reasonable now. Let’s try a waterfall temperature plot,
with black for the first yo, red for the second, green for the third,
and blue for the fourth, as explained in the legend.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>mfrow<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq_along</a></span><span class="op">(</span><span class="va">s</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">ss</span> <span class="op">&lt;-</span> <span class="va">s</span><span class="op">[[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span></span>
<span>    <span class="va">ctd</span> <span class="op">&lt;-</span> <span class="fu">oce</span><span class="fu">::</span><span class="fu"><a href="https://dankelley.github.io/oce/reference/as.ctd.html" class="external-link">as.ctd</a></span><span class="op">(</span>salinity<span class="op">=</span><span class="va">ss</span><span class="op">[[</span><span class="st">"salinity"</span><span class="op">]</span><span class="op">]</span>,</span>
<span>        temperature<span class="op">=</span><span class="va">ss</span><span class="op">[[</span><span class="st">"temperature"</span><span class="op">]</span><span class="op">]</span>,</span>
<span>        pressure<span class="op">=</span><span class="va">ss</span><span class="op">[[</span><span class="st">"pressure"</span><span class="op">]</span><span class="op">]</span>,</span>
<span>        longitude<span class="op">=</span><span class="va">ss</span><span class="op">[[</span><span class="st">"longitude"</span><span class="op">]</span><span class="op">]</span>,</span>
<span>        latitude<span class="op">=</span><span class="va">ss</span><span class="op">[[</span><span class="st">"latitude"</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span>
<span>    <span class="va">ctd</span> <span class="op">&lt;-</span> <span class="fu">oce</span><span class="fu">::</span><span class="fu"><a href="https://dankelley.github.io/oce/reference/ctdTrim.html" class="external-link">ctdTrim</a></span><span class="op">(</span><span class="va">ctd</span>, <span class="st">"upcast"</span><span class="op">)</span></span>
<span>    <span class="kw">if</span> <span class="op">(</span><span class="va">i</span> <span class="op">==</span> <span class="fl">1</span><span class="op">)</span> <span class="op">{</span></span>
<span>       <span class="fu">oce</span><span class="fu">::</span><span class="fu"><a href="https://dankelley.github.io/oce/reference/plotProfile.html" class="external-link">plotProfile</a></span><span class="op">(</span><span class="va">ctd</span>, xtype<span class="op">=</span><span class="st">"temperature"</span>, eos<span class="op">=</span><span class="st">"unesco"</span><span class="op">)</span></span>
<span>    <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>       <span class="fu"><a href="https://rdrr.io/r/graphics/lines.html" class="external-link">lines</a></span><span class="op">(</span><span class="va">ctd</span><span class="op">[[</span><span class="st">"temperature"</span><span class="op">]</span><span class="op">]</span>, <span class="va">ctd</span><span class="op">[[</span><span class="st">"pressure"</span><span class="op">]</span><span class="op">]</span>, col<span class="op">=</span><span class="va">i</span><span class="op">)</span></span>
<span>    <span class="op">}</span></span>
<span><span class="op">}</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/legend.html" class="external-link">legend</a></span><span class="op">(</span><span class="st">"bottomright"</span>, lwd<span class="op">=</span><span class="fl">1</span>, col<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq_along</a></span><span class="op">(</span><span class="va">s</span><span class="op">)</span>,</span>
<span>    legend<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="st">"yo"</span>,</span>
<span>        <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">s</span>,<span class="kw">function</span><span class="op">(</span><span class="va">ss</span><span class="op">)</span> <span class="va">ss</span><span class="op">$</span><span class="va">yoNumber</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="oceanglider_files/figure-html/unnamed-chunk-15-1.png" width="700"></p>
<p>At this stage, readers will likely have some ideas for doing more
with this sample dataset, and ought to be aware that many of the steps
here might not be appropriate for other datasets, e.g. those in which
data were acquired on both ascent and descent, or only on descent.</p>
</div>
<div class="section level2">
<h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<ul>
<li><p>Integrated Ocean Observing System (U.S.). “Manual for Quality
Control of Temperature and Salinity Data Observations from Gliders.
Version 1.0.” Report. U.S. Department of Commerce, National Oceanic and
Atmospheric Administration, National Ocean Service, Integrated Ocean
Observing System, U.S. Integrated Ocean Observing System, Glider Data
Assembly Center, 2016. <a href="https://www.oceanbestpractices.net/handle/11329/289" class="external-link uri">https://www.oceanbestpractices.net/handle/11329/289</a>.</p></li>
<li><p>Integrated Ocean Observing System (U.S.). “NGDAC NetCDF File
Format Version 2,” March 27, 2019. <a href="https://github.com/ioos/ioosngdac/wiki/NGDAC-NetCDF-File-Format-Version-2" class="external-link uri">https://github.com/ioos/ioosngdac/wiki/NGDAC-NetCDF-File-Format-Version-2</a>.</p></li>
</ul>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Dan Kelley, Clark Richards, Chantelle Layton.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>

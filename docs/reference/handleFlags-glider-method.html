<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Handle Flags in glider Objects — handleFlags,glider-method • oceglider</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Handle Flags in glider Objects — handleFlags,glider-method"><meta property="og:description" content="This function may be used to set suspicious data to NA,
or some other value, based on the values of corresponding data-quality
flags."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">oceglider</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.1.8</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../articles/oceglider.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/slocum_glider.html">Slocum Gliders</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/dankelley/oceglider/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Handle Flags in glider Objects</h1>
    <small class="dont-index">Source: <a href="https://github.com/dankelley/oceglider/blob/HEAD/R/flags.R" class="external-link"><code>R/flags.R</code></a></small>
    <div class="hidden name"><code>handleFlags-glider-method.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function may be used to set suspicious data to <code>NA</code>,
or some other value, based on the values of corresponding data-quality
flags.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="co"># S4 method for glider</span></span>
<span><span class="fu"><a href="https://dankelley.github.io/oce/reference/handleFlags.html" class="external-link">handleFlags</a></span><span class="op">(</span></span>
<span>  object <span class="op">=</span> <span class="st">"oce"</span>,</span>
<span>  flags <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  actions <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  where <span class="op">=</span> <span class="st">"payload1"</span>,</span>
<span>  debug <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"gliderDebug"</span>, <span class="fl">0</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>object</dt>
<dd><p>An object of <a href="glider-class.html">glider</a>.</p></dd>


<dt>flags</dt>
<dd><p>A <code>list</code> specifying flag values upon which
actions will be taken. This can take two forms. In the first, the
list has named elements each containing a vector of integers. For example,
salinities flagged with values of 3 ("suspect"), 4 ("fail")
or 9 ("missing") would be specified by <code>flags=list(salinity=c(3,4,9))</code>.
Several data items can be specified,
e.g. <code>flags=list(salinity=c(3,4,9),temperature=c(3,4,9))</code> indicates
that the actions are to take place for both salinity and temperature.
In the second form, <code>flags</code> is a list with unnamed vectors, and
this means to apply the actions to all the data entries; thus,
<code>flags=list(c(3,4,9))</code> means to apply not just to salinity and temperature,
but also to everything else for which flags have been set up. If <code>flags</code>
is not provided, then <code><a href="https://dankelley.github.io/oce/reference/defaultFlags.html" class="external-link">defaultFlags()</a></code> is called on
<code>object</code>, to try to determine a conservative default.</p></dd>


<dt>actions</dt>
<dd><p>An optional <code>list</code> that contains items with
names that match those in the <code>flags</code> argument.  If <code>actions</code>
is not supplied, the default will be to set all values identified by
<code>flags</code> to <code>NA</code>; this can also be specified by
specifying <code>actions=list("NA")</code>. It is also possible to specify
functions that calculate replacement values. These are provided
with <code>object</code> as the single argument, and must return a
replacement for the data item in question.</p></dd>


<dt>where</dt>
<dd><p>An optional string that permits data and flags to be stored
indirectly, e.g. with data in <code>object@data[[where]]</code> instead of
in <code>object@data</code>, and flags in <code>object@metadata$flags[[where]]</code> instead of in
<code>object@metadata$flags</code>. If <code>where</code> is NULL, the second forms are used. This
scheme is needed because SeaExplorer data are stored in this manner.</p></dd>


<dt>debug</dt>
<dd><p>An optional integer specifying the degree of debugging, with
value 0 meaning to skip debugging and 1 or higher meaning to print some
information about the arguments and the data. It is usually a good idea to set
this to 1 for initial work with a dataset, to see which flags are being
handled for each data item. If not supplied, this defaults to the value of
<code>\link{getOption}("gliderDebug",0)</code>.</p></dd>

</dl></div>
    <div id="details">
    <h2>Details</h2>
    <p>The flags are stored within the object as a <a href="https://rdrr.io/r/base/list.html" class="external-link">list</a>
named <code>payload1</code>, which is stored within a list named <code>flags</code>
that is stored in the object's <code>metadata</code> slot. Both
<code>flags</code> and <code>flags$payload1</code> are set up when the object is
created, but values are inserted into <code>flags$payload1</code> are
inserted later, when the data are read by one of the <code>read.glider*</code>
functions.</p>
<p>For example, <code><a href="read.glider.seaexplorer.delayed.html">read.glider.seaexplorer.delayed()</a></code>
sets <code>flags$payload1$salinity</code> to be a vector of length
matching the data stored in <code>data$payload1$salinity</code>, and
does the same for temperature and some other things that are typically
assessed as part of quality-assessment procedures.  When these
things are set up, they are also assigned numerical values, one for
each element in the data set.  The initial value is set to
value 2, which means <code>not_evaluated</code>
in the IOOS 2017 quality-control scheme (see table 2 of reference 1).</p>
<p>These numerical values provide a way to edit a dataset in an
convenient and traceable way, through the appropriate setting
of the <code>flags</code> and <code>actions</code> arguments. Flag values
may be altered with <code><a href="setFlags-glider-method.html">setFlags,glider-method()</a></code>, as
illustrated in the “Examples” section.</p>
    </div>
    <div id="references">
    <h2>References</h2>
    
<ol><li><p>U.S. Integrated Ocean Observing System.
"Manual for the Use of Real-Time Oceanographic Data Quality Control Flags, Version 1.1,"
2017. <a href="https://cdn.ioos.noaa.gov/media/2017/12/QARTOD-Data-Flags-Manual_Final_version1.1.pdf" class="external-link">https://cdn.ioos.noaa.gov/media/2017/12/QARTOD-Data-Flags-Manual_Final_version1.1.pdf</a>.</p></li>
</ol></div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p>Other functions relating to data-quality flags: 
<code><a href="setFlags-glider-method.html">setFlags,glider-method</a></code></p></div>
    </div>
    <div id="author">
    <h2>Author</h2>
    <p>Dan Kelley</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">oceglider</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">directory</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata/seaexplorer/raw"</span>, package <span class="op">=</span> <span class="st">"oceglider"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">g</span> <span class="op">&lt;-</span> <span class="fu"><a href="read.glider.seaexplorer.delayed.html">read.glider.seaexplorer.delayed</a></span><span class="op">(</span><span class="va">directory</span>, progressBar <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># The histogram motivates a crude limit for anomalously low salinity.</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>mfrow <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span>, mar <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">3</span>, <span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span>, mgp <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">0.75</span>, <span class="fl">0</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/hist.html" class="external-link">hist</a></span><span class="op">(</span><span class="va">g</span><span class="op">[[</span><span class="st">"salinity"</span><span class="op">]</span><span class="op">]</span>, breaks <span class="op">=</span> <span class="fl">100</span>, xlab <span class="op">=</span> <span class="st">"Original Salinity"</span>, main <span class="op">=</span> <span class="st">""</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/abline.html" class="external-link">abline</a></span><span class="op">(</span>v <span class="op">=</span> <span class="fl">31</span>, col <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Flag value 3 means 'suspect' in the IOOS scheme [1, table]; other</span></span></span>
<span class="r-in"><span><span class="co"># flags are pass=1, not_evaluated=2 (the default as read), fail=4, and missing=9.</span></span></span>
<span class="r-in"><span><span class="va">g2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dankelley.github.io/oce/reference/setFlags.html" class="external-link">setFlags</a></span><span class="op">(</span><span class="va">g</span>, <span class="st">"salinity"</span>, <span class="va">g</span><span class="op">[[</span><span class="st">"salinity"</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;</span> <span class="fl">31</span>, <span class="fl">3</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">g3</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dankelley.github.io/oce/reference/handleFlags.html" class="external-link">handleFlags</a></span><span class="op">(</span><span class="va">g2</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">4</span>, <span class="fl">9</span><span class="op">)</span><span class="op">)</span> <span class="co"># use default action, which is "NA"</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/hist.html" class="external-link">hist</a></span><span class="op">(</span><span class="va">g3</span><span class="op">[[</span><span class="st">"salinity"</span><span class="op">]</span><span class="op">]</span>, breaks <span class="op">=</span> <span class="fl">100</span>, xlab <span class="op">=</span> <span class="st">"Trimmed Salinity"</span>, main <span class="op">=</span> <span class="st">""</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="handleFlags-glider-method-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Dan Kelley, Clark Richards, Chantelle Layton.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

      </footer></div>

  


  

  </body></html>

